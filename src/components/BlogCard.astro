---
import type { CollectionEntry } from "astro:content";

type PostEntry = CollectionEntry<"blog">;

const { post } = Astro.props as { post: PostEntry };

const publishDate = new Date(post.data.publishDate).toLocaleDateString(
    "en-US",
    {
        year: "numeric",
        month: "short",
    },
);

const readingTime = post.data.readingTime ?? 6;
const link = `/blog/${post.slug}`;
---

<a
    class="group relative flex flex-col gap-3 p-5 bg-surface border border-black/10 rounded-lg hover:border-accent-cyan transition-colors"
    href={link}
>
    <div
        class="flex items-center justify-between gap-4 text-xs font-pixel text-secondary"
    >
        <span>{publishDate}</span>
        <span>{readingTime} min</span>
    </div>

    <div>
        <h3
            class="text-xl font-display leading-tight text-primary group-hover:text-accent-cyan transition-colors"
        >
            {post.data.title}
        </h3>
        <p
            class="text-secondary leading-relaxed text-sm line-clamp-3"
        >
            {post.data.description}
        </p>
    </div>

    {
        post.data.tags.length > 0 && (
            <ul class="flex flex-wrap gap-2 mt-auto pt-3 border-t border-black/5">
                {post.data.tags.slice(0, 3).map((tag) => (
                    <li class="px-2 py-1 bg-black/5 text-[11px] font-pixel text-secondary rounded-full">
                        {tag}
                    </li>
                ))}
            </ul>
        )
    }
</a>
